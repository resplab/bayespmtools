% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/valprec.R
\name{bpm_valprec}
\alias{bpm_valprec}
\title{Bayesian Precision / VoI Calculator}
\usage{
bpm_valprec(
  N,
  evidence,
  targets,
  n_sim = NULL,
  method = "sample",
  threshold = NULL,
  dist_type = "logitnorm",
  impute_cor = TRUE,
  ex_args = NULL
)
}
\arguments{
\item{N}{Numeric vector of sample sizes to evaluate.}

\item{evidence}{A named list with prior evidence parameters, or a
Monte Carlo sample returned by \code{bpm_valsamp()}.}

\item{targets}{A named list of targets to compute.
\describe{
\item{eciw.metric}{Logical; compute expected CI width.}
\item{qciw.metric}{Numeric scalar in (0,1); CI width quantile.}
\item{oa.nb}{Logical; compute optimality assurance for net benefit.}
\item{voi.nb}{Logical; compute EVSI and EVSI/EVPI.}
}}

\item{n_sim}{Number of Monte Carlo simulations. Default is inferred
from the supplied sample when possible.}

\item{method}{Method to compute CI widths. One of \code{"sample"} or
\code{"2s"}.}

\item{threshold}{Decision threshold for net benefit calculations.
Required if \code{oa.nb} or \code{voi.nb} are requested.}

\item{dist_type}{Distribution for calibrated risks. Default is
\code{"logitnorm"}.}

\item{impute_cor}{Logical; whether to induce correlation between
parameters.}

\item{ex_args}{Optional list of extra arguments. May include
\code{f_progress}, a custom progress function.}
}
\value{
A list with elements:
\describe{
\item{results}{Matrix of requested metrics by sample size.}
\item{sample}{Monte Carlo sample used for computations.}
\item{evidence}{Processed evidence object.}
\item{targets}{Targets as supplied by the user.}
\item{ciws}{Simulated CI widths for requested metrics.}
}
}
\description{
Bayesian precision and value-of-information calculator for external
validation studies of risk prediction models at fixed sample sizes.
}
\examples{
evidence <- list(
  prev = list(type = "beta", mean = 0.38, sd = 0.01),  # tight prior for stability
  cstat = list(type="beta", mean = 0.7, sd = 0.05),
  cal_mean = list(mean = 0, sd = 0.3),
  cal_slp = list(mean = 0.8, sd = 0.3)
)

res <- bpm_valprec(
  N = c(1000, 1500),
  evidence = evidence,
  targets = list(eciw.cstat = TRUE, qciw.cal_slp=0.9, voi.nb=0.8),
  threshold=0.2,
  n_sim = 100            # faster and safer on CRAN. Please increase this value for real-world use.
)

print(res$results)

}
